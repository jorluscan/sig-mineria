<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9IiMwRjE3MkEiLz48cGF0aCBkPSJNMzIgMTRMNTAgMjNWNDFMMzIgNTBMMTQgNDFWMjNMMzIgMTRaIiBmaWxsPSIjRDRBRjM3Ii8+PHBhdGggZD0iTTMyIDE0TDUwIDIzTDMyIDMyTDE0IDIzTDMyIDE0WiIgZmlsbD0iI0ZDRDM0RCIgb3BhY2l0eT0iMC41Ii8+PHBhdGggZD0iTTMyIDUwVjMyTDUwIDIzVjQxTDMyIDUwWiIgZmlsbD0iI0I0NTMwOSIgb3BhY2l0eT0iMC4zIi8+PC9zdmc+" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // Paleta Corporativa "Slate & Blue"
            brand: {
              50: '#eff6ff',
              100: '#dbeafe',
              500: '#3b82f6', // Azul Primario (Botones/Links)
              600: '#2563eb', // Azul Hover
              700: '#1d4ed8', // Azul Oscuro
              900: '#1e3a8a', // Azul Marino Corporativo
            },
            slate: {
              850: '#1e293b', // Sidebar fondo
              900: '#0f172a', // Sidebar oscuro
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'], // Solo Sans-Serif
          }
        }
      }
    }
  </script>

  <style>
    body {
      font-family: "Inter", sans-serif;
    }

    /* Transiciones suaves pero r치pidas para entorno de trabajo */
    .fade-in {
      animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(5px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Scrollbar profesional fina */
    aside::-webkit-scrollbar {
      width: 5px;
    }

    aside::-webkit-scrollbar-track {
      background: transparent;
    }

    aside::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 20px;
    }

    aside::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }
  </style>
  <title>SIG | Sistema Integrado de Gesti칩n</title>
</head>

<body class="bg-gray-50 text-slate-800 antialiased h-screen overflow-hidden flex">

  <div class="lg:hidden fixed w-full bg-slate-900 text-white p-3 flex justify-between items-center z-50 shadow-md">
    <div class="flex items-center gap-3">
      <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center font-bold">SIG</div>
      <span class="font-semibold text-sm tracking-wide">PANEL DE CONTROL</span>
    </div>
    <button id="mobile-menu-btn" class="text-gray-300 hover:text-white focus:outline-none">
      <i class="fas fa-bars text-xl"></i>
    </button>
  </div>

  <div id="sidebar-overlay"
    class="fixed inset-0 bg-slate-900/50 z-30 hidden lg:hidden backdrop-blur-sm transition-opacity"></div>

  <aside id="sidebar"
    class="hidden lg:flex flex-col w-64 bg-slate-900 text-slate-300 h-full fixed lg:relative z-40 transition-transform duration-300 border-r border-slate-800 shrink-0">

    <div class="h-16 flex items-center px-6 border-b border-slate-800 bg-slate-950">
      <div class="flex items-center gap-3 text-white">
        <div
          class="w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-md flex items-center justify-center shadow-lg">
          <i class="fas fa-cube text-xs"></i>
        </div>
        <div>
          <h1 class="font-bold text-sm tracking-wide leading-none">INCIVYS</h1>
          <p class="text-[10px] text-slate-500 font-medium">Gold & Mining ERP</p>
        </div>
      </div>
      <button id="close-sidebar" class="lg:hidden ml-auto text-slate-400"><i class="fas fa-times"></i></button>
    </div>

    <div class="px-4 py-6 border-b border-slate-800/50">
      <div class="flex items-center gap-3">
        <div
          class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-white font-bold text-sm border-2 border-slate-600">
          {{ user.username|slice:":2"|upper }}
        </div>
        <div>
          <p class="text-sm font-semibold text-white">{{ user.username|capfirst }}</p>
          <p class="text-xs text-slate-500">Administrador</p>
        </div>
      </div>
    </div>

    <nav class="flex-1 overflow-y-auto py-4 px-3 space-y-1">

      <p class="px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2 mt-2">Principal</p>

      <a href="{% url 'inventory_dashboard' %}" class="flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all
          {% if request.resolver_match.url_name == 'inventory_dashboard' %}
            bg-blue-600 text-white shadow-lg shadow-blue-900/20
          {% else %}
            text-slate-400 hover:bg-slate-800 hover:text-white
          {% endif %}">
        <i class="fas fa-chart-pie w-5 text-center"></i>
        <span>Dashboard General</span>
      </a>

      <p class="px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6">Operaciones</p>

      <a href="{% url 'inventory_list' %}" class="flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all
          {% if request.resolver_match.url_name == 'inventory_list' %}
            bg-blue-600 text-white shadow-lg shadow-blue-900/20
          {% else %}
            text-slate-400 hover:bg-slate-800 hover:text-white
          {% endif %}">
        <i class="fas fa-boxes-stacked w-5 text-center"></i>
        <span>Inventario</span>
      </a>

      <a href="{% url 'inventory_reports' %}" class="flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-all
          {% if request.resolver_match.url_name == 'inventory_reports' %}
            bg-blue-600 text-white shadow-lg shadow-blue-900/20
          {% else %}
            text-slate-400 hover:bg-slate-800 hover:text-white
          {% endif %}">
        <i class="fas fa-file-contract w-5 text-center"></i>
        <span>Reporte</span>
      </a>

    </nav>

    <div class="p-4 border-t border-slate-800 bg-slate-950">
      <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit"
          class="flex items-center gap-2 w-full text-slate-400 hover:text-red-400 transition-colors text-xs font-semibold">
          <i class="fas fa-power-off"></i>
          <span>Cerrar Sesi칩n</span>
        </button>
      </form>
    </div>
  </aside>

  <main class="flex-1 flex flex-col h-full overflow-hidden bg-gray-50 w-full relative">

    <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 lg:px-8 shrink-0 z-20">

      <div class="flex items-center text-sm">
        <span class="text-gray-400 lg:hidden" id="mobile-menu-trigger"></span>
        <div class="flex items-center gap-2 text-gray-500">
          <i class="fas fa-building text-gray-300"></i>
          <span class="text-gray-300">/</span>
          <span class="font-semibold text-slate-700">
            {% if request.resolver_match.url_name == 'inventory_dashboard' %}Vista General
            {% elif request.resolver_match.url_name == 'inventory_list' %}Gesti칩n de Activos
            {% else %}Sistema{% endif %}
          </span>
        </div>
      </div>

      <div class="flex items-center gap-6">

        <div class="hidden md:flex items-center gap-2 px-3 py-1 bg-green-50 rounded-full border border-green-100">
          <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
          <span class="text-xs font-semibold text-green-700 uppercase tracking-wide">Sistema Operativo</span>
        </div>

        <div class="h-8 w-px bg-gray-200 hidden md:block"></div>

        <div class="text-right hidden sm:block">
          <p class="text-xs font-bold text-slate-700">{% now "H:i A" %}</p>
          <p class="text-[10px] text-gray-400 uppercase font-medium">{% now "d M, Y" %}</p>
        </div>

      </div>
    </header>

    <section class="flex-1 overflow-y-auto p-6 lg:p-8 scroll-smooth">
      <div class="max-w-7xl mx-auto fade-in">

        {% if messages %}
        <div class="mb-6 space-y-2">
          {% for message in messages %}
          <div class="px-4 py-3 rounded border text-sm flex items-center gap-3 shadow-sm
            {% if message.tags == 'success' %} bg-white border-l-4 border-l-green-500 text-slate-700
            {% elif message.tags == 'error' %} bg-white border-l-4 border-l-red-500 text-red-700
            {% else %} bg-white border-l-4 border-l-blue-500 text-blue-700 {% endif %}">
            <i
              class="fas {% if message.tags == 'success' %}fa-check-circle text-green-500{% else %}fa-info-circle{% endif %}"></i>
            {{ message }}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}

      </div>
    </section>

  </main>

  <script>
    const btn = document.getElementById('mobile-menu-btn');
    const closeBtn = document.getElementById('close-sidebar');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');

    function toggleMenu() {
      sidebar.classList.toggle('hidden');
      sidebar.classList.toggle('flex');
      overlay.classList.toggle('hidden');
    }

    btn.addEventListener('click', toggleMenu);
    closeBtn.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);
  </script>
</body>

</html>